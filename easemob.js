!function(e,t){"use strict";var n=n||{};n.utils=n.utils||{},n.utils.encode=function(e,t){if(!e||0===e.length)return"";var n="";return n=e.replace(/&amp;/g,"&"),n=n.replace(/<(?=[^o][^)])/g,"&lt;"),n=n.replace(/>/g,"&gt;"),n=n.replace(/\"/g,"&quot;"),n=n.replace(/\n/g,"<br>")},n.utils.decode=function(e){if(!e||0===e.length)return"";var t="";return t=e.replace(/&amp;/g,"&")},n.utils.convertFalse=function(e){return e="undefined"==typeof e?"":e,"false"===e?!1:e},n.utils.getIEVersion=function(){var e,t=navigator.userAgent,n={4:8,5:9,6:10,7:11};return e=t.match(/MSIE (\d+)/i),e&&e[1]?+e[1]:(e=t.match(/Trident\/(\d+)/i),e&&e[1]?n[e[1]]||null:null)},n.utils.queryString=function(e,t){var n=e.match(new RegExp("[?&]?"+t+"=[0-9a-zA-Z%@._-]*[^&]","g"));return n=n&&n[0]?"?"==n[0][0]||"&"==n[0][0]?n[0].slice(1):n[0]:"",n.slice(t.length+1)},n.utils.getConfig=function(e,t){var n;if(e&&t){for(var o=document.scripts,s=0,i=o.length;i>s;s++)if(o[s].src&&0<o[s].src.indexOf(e)){n=o[s].src;break}}else n=e?e:location.href;var r={};if(!n)return{str:"",json:r,domain:""};var a,l=n.indexOf("?"),c=n.indexOf("//")>-1?n.indexOf("//"):0,u=n.slice(c,n.indexOf("/",c+2)),d=n.slice(l+1).split("&");r.src=n.slice(0,l);for(var m=0,f=d.length;f>m;m++)a=d[m].split("="),r[a[0]]=a.length>1?decodeURIComponent(a[1]):"";return{str:n,json:r,domain:u}},n.utils.isAndroid=/Android/i.test(navigator.userAgent),n.utils.isMobile=/mobile/i.test(navigator.userAgent),n.utils.isQQBrowserInAndroid=n.utils.isAndroid&&/MQQBrowser/.test(navigator.userAgent);var o=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},s=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null};n.utils.on=o,n.utils.remove=s,n.utils.isMin=function(){return document.visibilityState&&"hidden"==document.visibilityState||document.hidden?!0:void 0};var i=function(){var t=function(e,n){return!this instanceof t?new t:(this.t=(new Date).getTime(),this.iframe=document.getElementById(e),this.prefix=n||"_em_",void delete this.t)};return t.prototype.sendToParent=function(t){return e.parent.postMessage(JSON.stringify(t),"*"),this},t.prototype.sendToIframe=function(e){return this.iframe.contentWindow.postMessage(JSON.stringify(e),"*"),this},t.prototype.listenToParent=function(t){return o(e,"message",function(e){t(JSON.parse(e.data))}),this},t.prototype.listenToIframe=function(t){return o(e,"message",function(e){t(JSON.parse(e.data))}),this},t}(),r={set:function(t,n,o){if(o&&"localStorage"in e)localStorage.setItem(encodeURIComponent(t),encodeURIComponent(n));else{var s=new Date;s.setTime(s.getTime()+2592e6),document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(n)+";path=/;expires="+s.toGMTString()}},get:function(t,n){if(n&&"localStorage"in e){var o=localStorage.getItem(encodeURIComponent(t));return o?o:""}var s=document.cookie.match("(^|;) ?"+encodeURIComponent(t)+"=([^;]*)(;|$)");return s?decodeURIComponent(s[2]):""}};Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},e.EasemobWidget=n,e.TransferMessage=i,e.Emc=r}(window,void 0),function(e,t){"use strict";var n,o,s,i,r,a=5,l=document.title,c={x:10,y:10},u={x:0,y:0},d=document.createElement("div"),m="-新消息提醒  ",f=0,p=document.referrer,g=function(e,t){var n;if(e&&t){for(var o=document.scripts,s=0,i=o.length;i>s;s++)if(o[s].src&&0<o[s].src.indexOf(e)){n=o[s].src;break}}else n=e?e:location.href;var r={};if(!n)return{str:"",json:r,domain:""};var a,l=n.indexOf("?"),c=n.indexOf("//")>-1?n.indexOf("//"):0,u=n.slice(c,n.indexOf("/",c+2)),d=n.slice(l+1).split("&");r.src=n.slice(0,l);for(var m=0,f=d.length;f>m;m++)a=d[m].split("="),r[a[0]]=a.length>1?decodeURIComponent(a[1]):"";return{str:n,json:r,domain:u}},h=function(e){return e="undefined"==typeof e?"":e,"false"===e?!1:e},y=g("easemob.js",!0);y.json.hide=h(y.json.hide),y.json.sat=h(y.json.sat),y.json.tenants=h(y.json.tenants);var b=function(e,t){var n=e||y.domain+"/webim/im.html?tenantId=";for(var o in t)t.hasOwnProperty(o)&&(n.indexOf(o+"=")<0?n+="&"+o+"="+t[o]:n=n.replace(new RegExp(o+"=[^&#?]*","gim"),o+"="+t[o]));return n},x=function(){n.listenToIframe(function(e){switch(e.event){case"msgPrompt":var t,n=(l+m).split("");clearInterval(f),f=setInterval(function(){t=n.shift(),document.title=t+Array.prototype.join.call(n,""),n.push(t)},360);break;case"notify":S(y.domain+"/webim/static/img/notify.png","新消息",e.detail);break;case"recoveryTitle":clearInterval(f),document.title=l;break;case"showChat":o.style.width="400px",o.style.height="500px",o.style.visibility="visible",o.style.right=c.x+"px",o.style.bottom=c.y+"px",o.style.cssText+="box-shadow: 0 4px 8px rgba(0,0,0,.2);border-radius: 4px;border: 1px solid #ccc\\9;";break;case"minChat":w&&clearTimeout(w),o.style.boxShadow="none",o.style.borderRadius="4px;",o.style.left="auto",o.style.right="-5px",o.style.top="auto",o.style.bottom="10px",o.style.border="none",y.json.hide?(o.style.visibility="hidden",o.style.width="12px",o.style.height="12px"):(o.style.height="37px",o.style.width="104px");break;case"setuser":Emc.set("emKefuUser"+e.tenantId,e.user,y.json.tenants);break;case"setgroupuser":Emc.set(e.group+e.tenantId,e.user,y.json.tenants);break;case"setchannel":Emc.set("emKefuChannel"+e.tenantId,e.channel,y.json.tenants);break;case"dragready":u.x=isNaN(Number(e.x))?0:Number(e.x),u.y=isNaN(Number(e.y))?0:Number(e.y),d.style.display="block",o.style.display="none",EasemobWidget.utils.on(document,"mousemove",I);break;case"dragend":j()}})};e.easemobIM=function(t){e.easemobIMS(null,t)},e.easemobIMS=function(t,n){if(t=t||y.json.tenantId){o||E(t,"initIframWithoutSettingSrc");var s,i="",r={tenantId:t,sat:y.json.sat,user:"",referrer:encodeURIComponent(p),show:!0};if(y.json.resources&&(r.resources=y.json.resources),n?(s=Emc.get(n+t,y.json.tenants),r.emgroup=n,r.user=s,i=b(o.getAttribute("src"),r)):(s=Emc.get("emKefuUser"+t,y.json.tenants),r.user=s,i=b(o.getAttribute("src"),r)),EasemobWidget.utils.isMobile){for(var l=e.event.srcElement||e.event.target,c=a;"A"!==l.nodeName&&c--;)l=l.parentNode;if("A"!==l.nodeName)return;l.setAttribute("href",i),l.setAttribute("target","_blank")}else o.setAttribute("src",i)}};var v=function(e,t){if(e&&!o){o=/MSIE (6|7|8)/.test(navigator.userAgent)?document.createElement('<iframe name="'+(new Date).getTime()+'">'):document.createElement("iframe"),s="EasemobIframe"+(new Date).getTime(),o.id=s,o.name=(new Date).getTime(),o.frameBorder=0,o.allowTransparency="true",o.style.cssText=["z-index:16777269;","overflow:hidden;","position:fixed;","bottom:10px;","right:-5px;","border:none;","width:400px;","height:0;","display:none;","transition:all .01s;"].join(""),d.style.cssText=["display:none;","cursor:move;","z-index:16777270;","position:fixed;","bottom:10px;","right:10px;","border:none;","width:400px;","height:500px;","border-radius:4px;","box-shadow: 0 4px 8px rgba(0,0,0,.2);","border-radius: 4px;"].join(""),d.style.background="url("+y.domain+"/webim/static/img/drag.png) no-repeat",r={tenantId:e||y.json.tenantId,hide:y.json.hide,sat:y.json.sat,user:i,referrer:encodeURIComponent(p)},y.json.resources&&(r.resources=y.json.resources);var a="";for(var l in r)r.hasOwnProperty(l)&&(a+=l+"="+r[l]+"&");"&"===a.slice(-1)&&(a=a.slice(0,-1)),t||(o.src=y.domain+"/webim/im.html?"+a),y.json.hide?(o.style.height="0",o.style.width="0"):(o.style.height="37px",o.style.width="104px"),EasemobWidget.utils.isMobile&&(o.style.cssText+="left:0;bottom:0",o.style.width="100%"),document.body.appendChild(d),document.body.appendChild(o),o.readyState?o.onreadystatechange=function(){("loaded"===o.readyState||"complete"===o.readyState)&&(this.style.display="block",n=new TransferMessage(s),x(),n.sendToIframe(r))}:o.onload=function(){this.style.display="block",n=new TransferMessage(s),x(),n.sendToIframe(r)}}},E=function(e,t){var n=e||y.json.tenantId;i=Emc.get("emKefuUser"+n,y.json.tenants),v(n,t),EasemobWidget.utils.on(d,"mouseup",j),T()},w=0,I=function(t){var n=(e.event||t,document.documentElement.clientWidth),o=document.documentElement.clientHeight,s=n-t.clientX-400+u.x,i=o-t.clientY-500+u.y;t.clientX-u.x<=0?s=n-400:t.clientX+400-u.x>=n&&(s=0),t.clientY-u.y<=0?i=o-500:t.clientY+500-u.y>=o&&(i=0),d.style.left="auto",d.style.top="auto",d.style.right=s+"px",d.style.bottom=i+"px",c={x:s,y:i},clearTimeout(w),w=setTimeout(j,500)},j=function(){EasemobWidget.utils.remove(document,"mousemove",I),o.style.left="auto",o.style.top="auto",o.style.right=c.x+"px",o.style.bottom=c.y+"px",d.style.left="auto",d.style.top="auto",d.style.right=c.x+"px",d.style.bottom=c.y+"px",d.style.display="none",o.style.display="block",setTimeout(function(){n.sendToIframe({event:"dragend"})},3e3)},T=function(){EasemobWidget.utils.on(e,"resize",function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=Number(o.style.right.slice(0,-2)),s=Number(o.style.bottom.slice(0,-2));400>e?(o.style.left="auto",o.style.right=0,d.style.left="auto",d.style.right=0):400>e-n?(o.style.right=e-400+"px",o.style.left=0,d.style.right=e-400+"px",d.style.left=0):(o.style.left="auto",d.style.left="auto"),500>t?(o.style.top="auto",o.style.bottom=0):500>t-s?(o.style.bottom=t-500+"px",o.style.top=0):o.style.top="auto"})},S=function(){var t=0;return function(n,o,s){if(0===t){t=setTimeout(function(){t=0},3e3),n=n||"",o=o||"",s=s||"";try{if(e.Notification)if("granted"===Notification.permission){var i=new Notification(o,{icon:n,body:s});i.onclick=function(){"function"==typeof e.focus&&e.focus(),this.close()},setTimeout(function(){i.close()},3e3)}else Notification.requestPermission()}catch(r){}}}}();y.json.hide||E()}(window,void 0);